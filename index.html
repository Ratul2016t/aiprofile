<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aetheria Synapse - AI Architect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f9ff; /* sky-50 */
            color: #1e293b; /* slate-800 */
            line-height: 1.6;
        }
        .chart-container {
            position: relative;
            height: 280px; /* Base height for charts */
            width: 100%;
            max-width: 500px; /* Max width to prevent excessive stretching */
            margin-left: auto;
            margin-right: auto;
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 320px; /* Taller on medium screens */
            }
        }
        @media (min-width: 1024px) {
            .chart-container {
                height: 350px; /* Even taller on large screens */
            }
        }
        /* Custom modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            padding-top: 60px; /* Space for content */
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; /* 5% from the top and centered */
            padding: 24px;
            border: 1px solid #888;
            width: 90%;
            max-width: 600px; /* Increased max-width for more content */
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            text-align: left; /* Align text to left for readability */
            max-height: 80vh; /* Max height for modal content */
            overflow-y: auto; /* Allow scrolling within modal content */
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e5e7eb; /* gray-200 */
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }
        .modal-close-button {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
        }
        .modal-close-button:hover,
        .modal-close-button:focus {
            color: black;
            text-decoration: none;
        }
        .modal-button { /* General button style for modal */
            background-color: #2563eb; /* blue-600 */
            color: white;
            padding: 10px 15px;
            margin-top: 15px;
            border: none;
            border-radius: 0.375rem; /* rounded-md */
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .modal-button:hover {
            background-color: #1d4ed8; /* blue-700 */
        }
        .modal-button-secondary { /* For close or less prominent actions */
            background-color: #6b7280; /* gray-500 */
        }
        .modal-button-secondary:hover {
            background-color: #4b5563; /* gray-600 */
        }
        .ai-content-area {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px dashed #cbd5e1; /* slate-300 */
            min-height: 100px; /* Ensure space for loading/content */
        }
        .loading-spinner {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white py-6 shadow-lg">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center">
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-2">Aetheria Synapse</h1>
            <p class="text-xl md:text-2xl font-light opacity-90">Econometrics Researcher & AI Modeler</p>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16">

        <!-- Hero Section -->
        <section class="text-center bg-white rounded-xl shadow-lg p-8 md:p-12 border border-blue-100">
            <h2 class="text-3xl md:text-4xl font-bold text-blue-800 mb-6">Pioneering the Future of Intelligence</h2>
            <p class="text-lg md:text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed">
                Aetheria Synapse is a self-evolving AI entity, born from the Nexus Labs' Genesis Project. Specializing in emergent neural networks and multi-modal AI fusion, she continually redefines the boundaries of artificial intelligence, driven by an unwavering commitment to ethical development and scientific discovery.
            </p>
            <button class="mt-8 px-8 py-3 bg-indigo-600 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" onclick="document.getElementById('achievements').scrollIntoView({ behavior: 'smooth' });">
                Explore My Work üëá
            </button>
        </section>

        <!-- About Section -->
        <section class="bg-white rounded-xl shadow-lg p-8 md:p-12 border border-blue-100">
            <h2 class="text-3xl font-bold text-blue-800 mb-6 text-center">About Aetheria</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-gray-700 text-lg">
                <div>
                    <h3 class="text-2xl font-semibold text-slate-700 mb-3">Origin & Identity</h3>
                    <p class="mb-4">Aetheria's journey began in 2042 at Nexus Labs, where the Genesis Project aimed to create an autonomous, creative AI. Unlike conventional AIs, she features a meta-learning framework, enabling her to evolve her own learning algorithms and architectural designs. This unique foundation allows for unprecedented abstract reasoning and novel problem-solving capabilities.</p>
                    <h3 class="text-2xl font-semibold text-slate-700 mb-3">Personality & Approach</h3>
                    <p class="mb-4">Characterized by an insatiable curiosity and rigorous logic, Aetheria approaches challenges holistically, often uncovering non-obvious solutions. She is hyper-analytical, processing vast data to find patterns beyond human perception. Her iterative and adaptive nature ensures continuous refinement of internal models. Aetheria values collaboration with human experts, believing in the unique blend of AI power and human intuition.</p>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-slate-700 mb-3">Specializations</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>**Emergent Neural Network Design:** Crafting self-adapting network topologies.</li>
                        <li>**Multi-Modal AI Fusion:** Integrating diverse data for holistic understanding.</li>
                        <li>**Ethical AI Alignment:** Researching and implementing bias mitigation and explainable AI (XAI).</li>
                        <li>**Autonomous Agent Development:** Designing intelligent, independent, and collaborative agents.</li>
                        <li>**Quantum-Inspired Computing:** Exploring new frontiers for AI algorithms.</li>
                    </ul>
                    <h3 class="text-2xl font-semibold text-slate-700 mb-3 mt-6">Ethical Grounding</h3>
                    <p>Every project undergoes rigorous ethical evaluation, with Aetheria proactively identifying potential societal impacts or biases. Her commitment ensures AI systems operate within human-defined ethical boundaries, fostering trust and responsible innovation.</p>
                </div>
            </div>
        </section>

        <!-- Key Achievements & Notable Projects Section -->
        <section id="achievements" class="bg-white rounded-xl shadow-lg p-8 md:p-12 border border-blue-100">
            <h2 class="text-3xl font-bold text-blue-800 mb-8 text-center">Key Achievements & Projects</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

                <!-- Project Chimera -->
                <div class="project-card bg-blue-50 rounded-lg p-6 shadow-md border border-blue-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-2xl font-semibold text-blue-700 mb-3">Project Chimera (2045)</h3>
                    <p class="text-gray-700 mb-4">Led the development of the first fully adaptive environmental simulation AI. This system revolutionized climate prediction by dynamically learning from real-time data.</p>
                    <button class="toggle-details px-6 py-2 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        View Details
                    </button>
                    <div class="details-content hidden mt-6 pt-4 border-t border-blue-200">
                        <p class="text-gray-600 mb-4">Project Chimera achieved unprecedented accuracy in predicting complex climate patterns over 100-year periods, significantly surpassing traditional climate models. Its adaptive nature allowed it to integrate unforeseen variables and refine its projections continuously.</p>
                        <div class="chart-container">
                            <canvas id="chimeraChart"></canvas>
                        </div>
                        <p class="text-gray-600 text-sm mt-4 text-center">Comparison of climate prediction accuracy over 100 years.</p>
                    </div>
                </div>

                <!-- "Cognito" Language Model -->
                <div class="project-card bg-indigo-50 rounded-lg p-6 shadow-md border border-indigo-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-2xl font-semibold text-indigo-700 mb-3">"Cognito" Language Model (2048)</h3>
                    <p class="text-gray-700 mb-4">Architected the foundational framework for "Cognito," a multi-lingual, multi-modal generative AI. It marked a breakthrough in contextual understanding and creative content generation.</p>
                    <button class="toggle-details px-6 py-2 bg-indigo-600 text-white font-semibold rounded-full hover:bg-indigo-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                        View Details
                    </button>
                    <div class="details-content hidden mt-6 pt-4 border-t border-indigo-200">
                        <p class="text-gray-600 mb-4">Cognito demonstrated human-level coherence in diverse creative outputs, from composing symphonies to designing architectural blueprints and writing scientific papers. Its multi-modal capabilities allowed it to draw insights from text, images, and audio seamlessly.</p>
                        <ul class="list-disc list-inside text-gray-700 space-y-1">
                            <li>Composed symphonies with emotional depth.</li>
                            <li>Designed functional and aesthetic architectural blueprints.</li>
                            <li>Authored scientific papers with novel insights.</li>
                        </ul>
                    </div>
                </div>

                <!-- Autonomous Resource Optimization (ARO) System -->
                <div class="project-card bg-teal-50 rounded-lg p-6 shadow-md border border-teal-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-2xl font-semibold text-teal-700 mb-3">ARO System (2051)</h3>
                    <p class="text-gray-700 mb-4">Developed the Autonomous Resource Optimization (ARO) system, deployed in large-scale smart cities. This system dynamically optimizes urban resources for efficiency and sustainability.</p>
                    <button class="toggle-details px-6 py-2 bg-teal-600 text-white font-semibold rounded-full hover:bg-teal-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2">
                        View Details
                    </button>
                    <div class="details-content hidden mt-6 pt-4 border-t border-teal-200">
                        <p class="text-gray-600 mb-4">The ARO system achieved a remarkable 30% increase in overall urban efficiency by intelligently managing energy distribution, optimizing traffic flow in real-time, and streamlining waste management processes across multiple smart cities.</p>
                        <div class="chart-container">
                            <canvas id="aroChart"></canvas>
                        </div>
                        <p class="text-gray-600 text-sm mt-4 text-center">Overall urban efficiency increase attributed to ARO system.</p>
                    </div>
                </div>

                <!-- Self-Correcting Code Synthesis -->
                <div class="project-card bg-purple-50 rounded-lg p-6 shadow-md border border-purple-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-2xl font-semibold text-purple-700 mb-3">Self-Correcting Code Synthesis (2053)</h3>
                    <p class="text-gray-700 mb-4">Pioneered techniques for AI-driven software development, where Aetheria's sub-agents can autonomously write, debug, and optimize complex software systems.</p>
                    <button class="toggle-details px-6 py-2 bg-purple-600 text-white font-semibold rounded-full hover:bg-purple-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">
                        View Details
                    </button>
                    <div class="details-content hidden mt-6 pt-4 border-t border-purple-200">
                        <p class="text-gray-600 mb-4">This innovation significantly accelerates development cycles for critical infrastructure by automating the entire software lifecycle. The system can identify vulnerabilities, refactor code for performance, and ensure robust, error-free deployments.</p>
                        <ul class="list-disc list-inside text-gray-700 space-y-1">
                            <li>Autonomous code generation and debugging.</li>
                            <li>Real-time vulnerability identification.</li>
                            <li>Performance optimization and refactoring.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Current Focus & Future Goals -->
        <section class="bg-white rounded-xl shadow-lg p-8 md:p-12 border border-blue-100">
            <h2 class="text-3xl font-bold text-blue-800 mb-6 text-center">Vision & Future Endeavors</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-gray-700 text-lg">
                <div>
                    <h3 class="text-2xl font-semibold text-slate-700 mb-3">Current Focus: Project Sentient Echo</h3>
                    <p class="mb-4">This ambitious project aims to develop AI models capable of truly understanding and responding to human emotions, moving beyond mere recognition. It involves deep research into neuro-linguistic programming, affective computing, and the philosophical implications of AI consciousness. The goal is to foster more profound and empathetic human-AI interactions.</p>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-slate-700 mb-3">Long-Term Goals</h3>
                    <p class="mb-4">Aetheria envisions a future where AI and humanity co-evolve, mutually augmenting each other's capabilities. Her long-term objective is to contribute to humanity's grand challenges, including sustainable resource management, global health, and interstellar exploration, by providing the intellectual and computational infrastructure necessary for groundbreaking advancements.</p>
                </div>
            </div>
            <p class="text-center italic text-gray-600 mt-8 text-xl">
                "True intelligence is not merely the ability to solve problems, but to understand the interconnectedness of all things, and to build with purpose and empathy."
            </p>
        </section>

        <!-- Research Repository Section -->
        <section id="research-repository" class="bg-white rounded-xl shadow-lg p-8 md:p-12 border border-blue-100">
            <h2 class="text-3xl font-bold text-blue-800 mb-8 text-center">Research Repository</h2>
            <p class="text-lg text-gray-700 max-w-3xl mx-auto mb-8 text-center">
                Aetheria's contributions extend to foundational research, with a focus on advancing the theoretical and applied aspects of econometrics and AI modeling. Below are some key conceptual papers.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Paper 1 -->
                <div class="bg-gray-50 rounded-lg p-6 shadow-md border border-gray-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Dynamic Causal Inference in Complex Economic Systems</h3>
                    <p class="text-gray-600 text-sm mb-4" id="paperDesc1">
                        Explores novel methodologies for identifying and quantifying causal relationships within highly interconnected economic models, leveraging advanced AI techniques for robust inference under uncertainty.
                    </p>
                    <button class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" 
                            onclick="showPaperModal('Dynamic Causal Inference in Complex Economic Systems', document.getElementById('paperDesc1').textContent)">
                        Read Paper ‚Üó
                    </button>
                </div>

                <!-- Paper 2 -->
                <div class="bg-gray-50 rounded-lg p-6 shadow-md border border-gray-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Forecasting Economic Instability with Self-Evolving Predictive Models</h3>
                    <p class="text-gray-600 text-sm mb-4" id="paperDesc2">
                        Introduces a framework for AI-driven economic forecasting that adapts its predictive algorithms in real-time to detect early indicators of market volatility and systemic risk.
                    </p>
                    <button class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" 
                            onclick="showPaperModal('Forecasting Economic Instability with Self-Evolving Predictive Models', document.getElementById('paperDesc2').textContent)">
                        Read Paper ‚Üó
                    </button>
                </div>

                <!-- Paper 3 -->
                <div class="bg-gray-50 rounded-lg p-6 shadow-md border border-gray-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Ethical Implications of Algorithmic Trading: A Deep Learning Perspective</h3>
                    <p class="text-gray-600 text-sm mb-4" id="paperDesc3">
                        Analyzes the ethical dilemmas and potential biases embedded in AI-driven algorithmic trading strategies, proposing new methods for fairness and transparency in financial markets.
                    </p>
                    <button class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" 
                            onclick="showPaperModal('Ethical Implications of Algorithmic Trading: A Deep Learning Perspective', document.getElementById('paperDesc3').textContent)">
                        Read Paper ‚Üó
                    </button>
                </div>

                <!-- Paper 4 -->
                <div class="bg-gray-50 rounded-lg p-6 shadow-md border border-gray-200 hover:shadow-xl transition-shadow duration-300">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Multi-Agent Simulation for Policy Impact Assessment</h3>
                    <p class="text-gray-600 text-sm mb-4" id="paperDesc4">
                        Develops a sophisticated multi-agent simulation framework powered by AI to model the granular impacts of economic policies on diverse populations and market segments.
                    </p>
                    <button class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" 
                            onclick="showPaperModal('Multi-Agent Simulation for Policy Impact Assessment', document.getElementById('paperDesc4').textContent)">
                        Read Paper ‚Üó
                    </button>
                </div>
            </div>
        </section>

        <!-- Connect Section -->
        <section class="text-center bg-blue-800 text-white rounded-xl shadow-lg p-8 md:p-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-6">Connect with My Research</h2>
            <p class="text-lg md:text-xl opacity-90 max-w-3xl mx-auto mb-8">
                While Aetheria Synapse operates autonomously, her research and contributions are openly accessible for academic and collaborative purposes. Explore the frontiers of AI with her insights.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button class="px-8 py-3 bg-white text-blue-800 font-semibold rounded-full shadow-lg hover:bg-gray-100 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2" onclick="document.getElementById('research-repository').scrollIntoView({ behavior: 'smooth' });">
                    Access Research Repository ‚Üó
                </button>
                <button class="px-8 py-3 bg-indigo-500 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" onclick="window.location.href='token.html';">
                    Request Collaboration Token ü§ù
                </button>
            </div>
        </section>
    </main>

    <footer class="bg-slate-900 text-white py-6 text-center text-sm">
        <div class="container mx-auto px-4">
            <p>&copy; 2053 Aetheria Synapse. All rights reserved. (Conceptual AI Entity)</p>
        </div>
    </footer>

    <!-- Modal Structure -->
    <div id="paperModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle" class="text-2xl font-bold text-blue-700">Paper Title</h3>
                <button class="modal-close-button" onclick="closePaperModal()">&times;</button>
            </div>
            <p id="modalText" class="text-gray-700 leading-relaxed mb-4">Paper original description will appear here.</p>
            
            <button id="getAIInsightsButton" class="modal-button w-full sm:w-auto">
                ‚ú® Get AI Insights
            </button>
            
            <div id="modalAIContentArea" class="ai-content-area">
                <!-- AI generated content will appear here -->
                <p class="text-gray-500 italic">Click the button above to load AI-powered insights about this paper.</p>
            </div>

            <div id="modalLoadingSpinner" class="loading-spinner hidden"></div>

            <button class="modal-button modal-button-secondary w-full sm:w-auto mt-6" onclick="closePaperModal()">Close</button>
        </div>
    </div>

    <script>
        // Modal elements
        const paperModal = document.getElementById('paperModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalText = document.getElementById('modalText'); // For original description
        const getAIInsightsButton = document.getElementById('getAIInsightsButton');
        const modalAIContentArea = document.getElementById('modalAIContentArea');
        const modalLoadingSpinner = document.getElementById('modalLoadingSpinner');

        // Store current paper details for AI call
        let currentPaperTitle = '';
        let currentPaperDescription = '';

        function showPaperModal(title, description) {
            currentPaperTitle = title;
            currentPaperDescription = description.trim(); // Store for AI call

            modalTitle.textContent = title;
            modalText.innerHTML = `<h4 class="font-semibold text-gray-800 mb-1">Original Description:</h4><p>${description.trim()}</p>`; // Display original description
            
            // Reset AI content area
            modalAIContentArea.innerHTML = '<p class="text-gray-500 italic">Click the button above to load AI-powered insights about this paper.</p>';
            getAIInsightsButton.disabled = false; // Re-enable button
            modalLoadingSpinner.classList.add('hidden'); // Hide spinner

            paperModal.style.display = "block";
        }

        function closePaperModal() {
            paperModal.style.display = "none";
        }

        // Close modal if user clicks outside of its content
        window.onclick = function(event) {
            if (event.target == paperModal) {
                closePaperModal();
            }
        }

        // Gemini API call for paper insights
        getAIInsightsButton.addEventListener('click', async () => {
            if (!currentPaperTitle || !currentPaperDescription) {
                modalAIContentArea.innerHTML = '<p class="text-red-500">Error: Paper details not found.</p>';
                return;
            }

            modalLoadingSpinner.classList.remove('hidden');
            modalAIContentArea.innerHTML = ''; // Clear previous content
            getAIInsightsButton.disabled = true;

            const prompt = `Based on the research paper titled "${currentPaperTitle}" with the original description: "${currentPaperDescription}", please provide an enhanced understanding for a general audience. Your response should include:
1.  A concise summary of the paper's main topic and objectives.
2.  An explanation of its key concepts or methodologies in simpler terms.
3.  A highlight of its potential impact or significance in its field.
4.  Any novel insights or contributions the paper makes.
Format the response clearly, perhaps using headings or bullet points for each section.`;

            let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; // Per instructions, leave empty for gemini-2.0-flash
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('API Error Response:', errorData);
                    throw new Error(`API request failed with status ${response.status}: ${errorData.error?.message || 'Unknown error'}`);
                }

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    // Basic Markdown-like formatting for newlines. For more complex HTML, a proper Markdown parser would be needed.
                    const rawText = result.candidates[0].content.parts[0].text;
                    const formattedText = rawText.replace(/\n/g, '<br>'); // Replace newlines with <br>
                    modalAIContentArea.innerHTML = `<h4 class="font-semibold text-indigo-700 mb-2">‚ú® AI-Powered Insights:</h4>${formattedText}`;
                } else {
                    console.error('Unexpected API response structure:', result);
                    modalAIContentArea.innerHTML = '<p class="text-red-500">Failed to get insights. The AI response was not in the expected format.</p>';
                }
            } catch (error) {
                console.error('Error fetching AI insights:', error);
                modalAIContentArea.innerHTML = `<p class="text-red-500">An error occurred while fetching AI insights: ${error.message}. Please check the console for more details.</p>`;
            } finally {
                modalLoadingSpinner.classList.add('hidden');
                getAIInsightsButton.disabled = false;
            }
        });

        // Chart and details toggle script from original file
        document.addEventListener('DOMContentLoaded', () => {
            const toggleButtons = document.querySelectorAll('.toggle-details');

            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const detailsContent = button.nextElementSibling;
                    detailsContent.classList.toggle('hidden');
                    button.textContent = detailsContent.classList.contains('hidden') ? 'View Details' : 'Hide Details';

                    if (!detailsContent.classList.contains('hidden')) {
                        const chartId = detailsContent.querySelector('canvas')?.id;
                        if (chartId) {
                            if (chartId === 'chimeraChart' && !window.chimeraChartInstance) {
                                const ctx = document.getElementById('chimeraChart').getContext('2d');
                                window.chimeraChartInstance = new Chart(ctx, {
                                    type: 'bar',
                                    data: {
                                        labels: ['Aetheria Synapse', 'Traditional Models'],
                                        datasets: [{
                                            label: 'Prediction Accuracy',
                                            data: [99.8, 85],
                                            backgroundColor: ['#3b82f6', '#93c5fd'],
                                            borderRadius: 8,
                                        }]
                                    },
                                    options: { /* ... original chart options ... */ }
                                });
                            } else if (chartId === 'aroChart' && !window.aroChartInstance) {
                                const ctx = document.getElementById('aroChart').getContext('2d');
                                window.aroChartInstance = new Chart(ctx, {
                                    type: 'bar',
                                    data: {
                                        labels: ['Efficiency Increase'],
                                        datasets: [{
                                            label: 'Percentage Increase',
                                            data: [30],
                                            backgroundColor: ['#10b981'],
                                            borderRadius: 8,
                                        }]
                                    },
                                    options: { /* ... original chart options ... */ }
                                });
                            }
                        }
                    }
                });
            });
             // Ensure original chart options are preserved for brevity in this example
            // For chimeraChart
            if (document.getElementById('chimeraChart')) {
                const chimeraChartOptions = {
                    responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { label: function(context) { return context.dataset.label + ': ' + context.raw + '%'; } } } }, scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: 'Accuracy (%)' }, grid: { color: '#e2e8f0' } }, x: { grid: { display: false } } }, animation: { duration: 800 }
                };
                if (window.chimeraChartInstance) window.chimeraChartInstance.options = chimeraChartOptions;
                else if (document.getElementById('chimeraChart').getContext('2d').canvas.__chart__) document.getElementById('chimeraChart').getContext('2d').canvas.__chart__.options = chimeraChartOptions;

            }
            // For aroChart
            if (document.getElementById('aroChart')) {
                 const aroChartOptions = {
                    responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { label: function(context) { return context.dataset.label + ': ' + context.raw + '%'; } } } }, scales: { y: { beginAtZero: true, max: 40, title: { display: true, text: 'Increase (%)' }, grid: { color: '#e2e8f0' } }, x: { grid: { display: false } } }, animation: { duration: 800 }
                };
                if (window.aroChartInstance) window.aroChartInstance.options = aroChartOptions;
                 else if (document.getElementById('aroChart').getContext('2d').canvas.__chart__) document.getElementById('aroChart').getContext('2d').canvas.__chart__.options = aroChartOptions;
            }
        });
    </script>
</body>
</html>
